(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[6341],{148267:(e,t,n)=>{e.exports=n.p+"0f4d1ff76624bb45a3fee4189279ee92.svg"},182765:(e,t,n)=>{e.exports=n.p+"092b071c3b3141a58787415450c27857.png"},359074:(e,t,n)=>{e.exports=n.p+"375217725f8ad1df6310e6738a7306e4.svg"},396679:(e,t,n)=>{e.exports=n.p+"a5844a7e2342caa1029833d27d976e99.svg"},661807:(e,t,n)=>{e.exports=n.p+"71911dd31666b4c410a9c8cd8af361bc.svg"},149374:(e,t,n)=>{e.exports=n.p+"b4c362308f7e586b97c5155337ad2ea5.svg"},841860:(e,t,n)=>{e.exports=n.p+"9ea38b117bb11b03761dc3351f048bfa.svg"},123555:(e,t,n)=>{e.exports=n.p+"5a1a231bd56982c69c29ccc058d4b627.svg"},614040:(e,t,n)=>{e.exports=n.p+"0d893da2d50673a2eed63138225eb111.svg"},525106:(e,t,n)=>{e.exports=n.p+"771880976d58ad9ca6aee94bb06089b4.png"},100553:(e,t,n)=>{e.exports=n.p+"1e020fbfcf47d6368053524411553d1f.svg"},568534:(e,t,n)=>{e.exports=n.p+"80f97fbf531019c97bcc2661b8d41036.svg"},106952:(e,t,n)=>{e.exports=n.p+"3020e9aa04f0b2277dc30309e18ef310.svg"
},952587:(e,t,n)=>{e.exports=n.p+"987cc6d375f9396c95619acafe8fcfd5.svg"},480281:(e,t,n)=>{"use strict";n.d(t,{cK:()=>_,c2:()=>A,ZP:()=>T});var r=n(785893),s=n(667294),o=n(101653),a=n(163585),i=n.n(a);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&E(e,t)}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}function h(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(s[n]=e[n])}return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}}return s}function p(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){E=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return E(e,t)}var _,m,g=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var s=u(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return p(this,n)}}!function(e){e.SIZE_40="SIZE_40";e.SIZE_60="SIZE_60"}(_||(_={}));var S=Object.freeze((c(m={},_.SIZE_40,"size-40"),c(m,_.SIZE_60,"size-60"),m)),O=n(182765),I=function(e){f(n,e);var t=N(n);function n(){l(this,n);return t.apply(this,arguments)}n.prototype.render=function(){var e=this.props,t=e.className,n=e.text,s=h(e,["className","text"]);return(0,r.jsx)("div",{style:{padding:8,borderRadius:4,width:s.size,height:s.size,backgroundColor:s.bgColor},className:t,children:(0,r.jsx)(o.Z,d({value:n,level:"M"},s))})};return n}(s.PureComponent);I.defaultProps={size:128,bgColor:"#ffffff",fgColor:"#000000"};var A=function(e){f(n,e);var t=N(n);function n(){l(this,n);return t.apply(this,arguments)}
n.prototype.render=function(){var e=this.props.overlaySize,t=S[null!=e?e:_.SIZE_40];return(0,r.jsxs)("div",{className:i().qrCodeContainer,children:[(0,r.jsx)(I,d({},this.props)),(0,r.jsx)("div",{className:i().qrCodeOverlay,children:(0,r.jsx)("img",{className:i()[t],src:O,alt:""})})]})};return n}(s.PureComponent);A.defaultProps={size:144,bgColor:"#ffffff",fgColor:"#000000"};const T=I},178232:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(785893),s=n(667294),o=n(294184),a=n.n(o),i=n(202351),l=n(304548),c=n(467345),u=n(882211),f=n(959207),d=n(473903),h=n(551778),p=n(746974),E=n(750203),_=n(558820),m=n(530562),g=n(203600),N=n(473708),S=n(889710),O=n.n(S),I=n(3066),A=n.n(I),T=n(380203),b=n.n(T);const C=i.ZP.connectStores([p.Z,f.Z,h.Z,d.default],(function(e){var t=e.giftCode,n=p.Z.get(t.skuId),r=t.subscriptionPlanId;return{sku:n,subscriptionPlan:null!=r?(0,m.oE)(r):null,application:f.Z.getGame(n.applicationId),gifter:d.default.getUser(t.userId)}}))((function(e){
var t=e.error,n=e.giftCode,o=e.gifter,i=e.sku,f=e.application,d=e.subscriptionPlan,h=null==o?N.Z.Messages.GIFT_CODE_AUTH_GIFTED:N.Z.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({username:o.username}),p=i.name;null!=d&&(p=(d.interval===g.rV.MONTH?N.Z.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:N.Z.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:i.name,intervalCount:d.intervalCount}));return(0,r.jsxs)(s.Fragment,{children:[null!=n.giftStyle?(0,r.jsx)(u.Z,{defaultAnimationState:c.SR.LOOP,giftStyle:n.giftStyle,className:O().seasonalIcon}):(0,r.jsx)(_.qE,{src:null!=o?o.getAvatarURL(void 0,100):null,size:l.AvatarSizes.DEPRECATED_SIZE_100,className:b().marginBottom20}),null!=t?(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(_.DK,{children:N.Z.Messages.INVITE_MODAL_ERROR_TITLE}),(0,r.jsx)(_.Dx,{children:t})]}):(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(_.DK,{children:h}),(0,r.jsxs)(_.Dx,{className:a()(b().marginTop8,A().flexCenter),children:[(0,r.jsx)(E.Z,{
size:E.Z.Sizes.MEDIUM,className:O().applicationIcon,game:f,skuId:i.id}),p]})]})]})}))},682719:(e,t,n)=>{"use strict";n.d(t,{q3:()=>Tt,_i:()=>bt,ZP:()=>vt});var r=n(785893),s=n(667294),o=n(970112),a=n(294184),i=n.n(a),l=n(517563),c=n(289283),u=n(202351),f=n(304548),d=n(744564),h=n(84441),p=n(561177),E=n(110108),_=n(153081),m=n(94340),g=n(281437),N=n(171053),S=n(154209),O=n(97245),I=n(281110),A=n(630631),T=n(20978),b=n(664625),C=n(652591),v=n(223919),y=n(2590),L=n(813292),M=n.n(L);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){i=!0;s=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}}(e,t)||function(e,t){
if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D,j="mweb_handoff_nonce",P="mweb_handoff_nonce_expiration";!function(e){e.NONCE_MISSING="nonce_missing";e.NONCE_EXPIRED="nonce_expired";e.NULL_HANDOFF_TOKEN="deep_link_failed";e.HANDOFF_EXCHANGE="handoff_exchange"}(D||(D={}));var Z=new Set([D.NONCE_MISSING,D.NONCE_EXPIRED,D.HANDOFF_EXCHANGE]),w=new Set([D.NULL_HANDOFF_TOKEN]),k=function(){A.Z.remove(j);A.Z.remove(P)};const U=function(){var e=(0,u.e7)([b.default],(function(){return b.default.getFingerprint()})),t=(0,
l.parse)(window.location.search),n=t.fingerprint,o=t.handoff_token,a=Array.isArray(n)?n.length>1?n[0]:null:n,i=null!=a?a:null!==e?e:void 0;s.useEffect((function(){null!==a&&e!==a&&d.Z.dispatch({type:"FINGERPRINT",fingerprint:a})}),[a,e]);var c=x(s.useState(null),2),p=c[0],E=c[1],_=s.useCallback((function(e){E(e);C.default.track(y.rMx.MOBILE_WEB_HANDOFF_FAILURE,{reason:e,fingerprint:(0,O.K)(i)},{fingerprint:i})}),[E,i]),m=A.Z.get(j);"null"===o&&null===p&&_(D.NULL_HANDOFF_TOKEN);null!=o&&"null"!==o&&null==m&&null===p&&_(D.NONCE_MISSING);s.useEffect((function(){if(null!=m){var e=A.Z.get(P);if(null==e||Date.now()>=e){_(D.NONCE_EXPIRED);k()}}}),[m,_]);s.useEffect((function(){if(null!=o&&"null"!==o&&null!=m){if(null!=p)return;I.ZP.post({url:y.ANM.HANDOFF_EXCHANGE,body:{key:m,handoff_token:o}}).then((function(e){return h.Z.loginToken(e.body.token,!1)})).then((function(){C.default.track(y.rMx.LOGIN_SUCCESSFUL,{source:y.uRl.MOBILE_WEB_HANDOFF,is_new_user:!1,fingerprint:(0,O.K)(i)})
;var e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("handoff_token");t.delete("fingerprint");e.search=t.toString();window.history.pushState(null,"",e)})).catch((function(){_(D.HANDOFF_EXCHANGE)})).finally((function(){k()}))}}),[o,m,p,i,_]);if(null==i)return null;var g=null==p?(0,r.jsxs)(r.Fragment,{children:[T.MOBILE_WEB_HANDOFF_EXPLANATION_TEXT_LINE_1,(0,r.jsx)("br",{}),T.MOBILE_WEB_HANDOFF_EXPLANATION_TEXT_LINE_2]}):w.has(p)?T.MOBILE_WEB_HANDOFF_ERROR_NO_TRY_AGAIN:Z.has(p)?T.MOBILE_WEB_HANDOFF_ERROR_TRY_AGAIN:void 0;return null!=p&&w.has(p)?(0,r.jsx)("div",{className:M().errorContainer,children:(0,r.jsx)(f.Text,{color:"interactive-normal",variant:"text-sm/semibold",children:g})}):(0,r.jsxs)("div",{className:M().container,children:[(0,r.jsx)(f.Text,{variant:"text-sm/semibold",children:g}),(0,r.jsx)(f.Button,{look:f.Button.Looks.INVERTED,color:f.Button.Colors.BRAND_NEW,onClick:function(){var e=v.Z.generateNonce();A.Z.set(j,e);A.Z.set(P,Date.now()+6e4)
;var t=new URL(y.x0X),n=new URLSearchParams(window.location.search);n.delete("fingerprint");n.delete("handoff_token");var r=new URLSearchParams;r.set("redirect",encodeURIComponent(window.location.pathname+n.toString()));r.set("key",e);r.set("fingerprint",i);t.search=r.toString();C.default.track(y.rMx.DEEP_LINK_CLICKED,{fingerprint:(0,O.K)(i),source:"mobile_web_handoff",destination:y.x0X},{fingerprint:i,flush:!0});window.location.href=t.toString()},children:(0,r.jsx)(f.Text,{className:M().buttonText,variant:"text-sm/semibold",children:T.MOBILE_WEB_HANDOFF_BUTTON_TEXT})})]})};var G=n(873553),F=n(571657),B=n(479373),H=n(558820),W=n(349979),z=n(473708),K=n(177704),V=n.n(K);function Q(e){var t=e.onDismiss;(0,B.Z)({type:F.nv.MODAL,name:F.zs.MULTI_ACCOUNT_SWITCH_LANDING});return(0,r.jsxs)(H.ZP,{className:V().chooseAccountAuthBox,children:[(0,r.jsx)(H.Dx,{children:z.Z.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT}),(0,r.jsx)(f.Text,{className:V().chooseAccountHelpText,variant:"text-md/normal",
color:"header-secondary",children:z.Z.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT_HELPER}),(0,r.jsx)(W.Z,{actionText:z.Z.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN,onAction:function(e){e===W.W.LOGIN_REQUIRED&&t()}}),(0,r.jsx)("div",{className:V().actions,children:(0,r.jsx)(f.Button,{className:V().chooseAccountButton,look:f.Button.Looks.LINK,color:f.Button.Colors.PRIMARY,onClick:t,size:f.Button.Sizes.MEDIUM,children:(0,r.jsx)(f.Text,{variant:"text-sm/normal",children:z.Z.Messages.SWITCH_ACCOUNTS_ADD_AN_ACCOUNT_BUTTON})})})]})}var Y=n(426797),q=n(560837),X=n(78501),$=n(686874),J=n(705429),ee=n(536038),te=n(107364),ne=n(249697),re=n(930948),se=n(120415),oe=n(178232),ae=n(308739),ie=n(575494),le=n(480281),ce=n(385028);function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
;if(null!=n){var r,s,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){i=!0;s=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(){return"undefined"==typeof document||"visible"===document.visibilityState}var he=n(296602),pe=n(441143),Ee=n.n(pe),_e=n(722406);function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(e,t,n,r,s,o,a){try{
var i=e[o](a),l=i.value}catch(e){n(e);return}i.done?t(l):Promise.resolve(l).then(r,s)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){ge(o,r,s,a,i,"next",e)}function i(e){ge(o,r,s,a,i,"throw",e)}a(void 0)}))}}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){i=!0;s=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}var Ae=function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),
0):r.next)&&!(s=s.call(r,o[1])).done)return s;(r=0,s)&&(o=[2&o[0],s.value]);switch(o[0]){case 0:case 1:s=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(s=a.trys,s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1];s=o;break}if(s&&a.label<s[2]){a.label=s[2];a.ops.push(o);break}s[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};function Te(e){return be.apply(this,arguments)}function be(){return(be=Ne((function(e){var t,n;return Ae(this,(function(r){switch(r.label){case 0:Ee()(null!=e.publicKey,"public key cannot be null");return[4,window.crypto.subtle.exportKey("spki",e.publicKey)];case 1:n=r.sent();return[2,btoa((t=String).fromCharCode.apply(t,Oe(new Uint8Array(n))))]}}))
}))).apply(this,arguments)}function Ce(e){return ve.apply(this,arguments)}function ve(){return(ve=Ne((function(e){return Ae(this,(function(t){switch(t.label){case 0:Ee()(null!=e.publicKey,"public key cannot be null");return[4,window.crypto.subtle.exportKey("spki",e.publicKey)];case 1:return[2,Me(t.sent())]}}))}))).apply(this,arguments)}function ye(e){var t;return btoa((t=String).fromCharCode.apply(t,Oe(new Uint8Array(e)))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,"")}function Le(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function Me(e){return Re.apply(this,arguments)}function Re(){return(Re=Ne((function(e){return Ae(this,(function(t){switch(t.label){case 0:return[4,window.crypto.subtle.digest({name:"SHA-256"},e)];case 1:return[2,ye(t.sent())]}}))}))).apply(this,arguments)}function xe(e,t){Ee()(null!=e.privateKey,"private key cannot be null");return window.crypto.subtle.decrypt({name:"RSA-OAEP",hash:"SHA-256"},e.privateKey,t)}
function De(e,t){return je.apply(this,arguments)}function je(){return(je=Ne((function(e,t){var n,r;return Ae(this,(function(s){switch(s.label){case 0:n=new TextDecoder;return[4,xe(e,Le(t))];case 1:r=s.sent();return[2,n.decode(r)]}}))}))).apply(this,arguments)}function Pe(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=Ne((function(e,t){return Ae(this,(function(n){switch(n.label){case 0:return[4,xe(e,Le(t))];case 1:return[2,ye(n.sent())]}}))}))).apply(this,arguments)}function we(e,t){return ke.apply(this,arguments)}function ke(){return(ke=Ne((function(e,t){var n,r,s,o,a,i,l;return Ae(this,(function(c){switch(c.label){case 0:return[4,De(e,t)];case 1:t=c.sent();n=/^(\d+):(\d{1,4}):([a-zA-Z0-9_]+):(.*)$/;if(null==(r=t.match(n)))throw new Error("Invalid encoded user record.");s=Se(r,5),o=s[1],a=s[2],i=s[3],l=s[4];return[2,new _e.Z({id:o,discriminator:a,avatar:"0"===i?null:i,username:l})]}}))}))).apply(this,arguments)}
var Ue=n(749565),Ge=n(520453),Fe=n(702533),Be=n.n(Fe),He=n(380203),We=n.n(He);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ke(e,t,n,r,s,o,a){try{var i=e[o](a),l=i.value}catch(e){n(e);return}i.done?t(l):Promise.resolve(l).then(r,s)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){Ke(o,r,s,a,i,"next",e)}function i(e){Ke(o,r,s,a,i,"throw",e)}a(void 0)}))}}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){i=!0;s=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ye,qe,Xe=function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;(r=0,s)&&(o=[2&o[0],s.value]);switch(o[0]){case 0:case 1:s=o;break;case 4:a.label++;return{value:o[1],done:!1
};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(s=a.trys,s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1];s=o;break}if(s&&a.label<s[2]){a.label=s[2];a.ops.push(o);break}s[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};!function(e){e[e.INITIALIZING=0]="INITIALIZING";e[e.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT";e[e.PENDING_FINISH=2]="PENDING_FINISH";e[e.PENDING_TICKET=3]="PENDING_TICKET";e[e.PENDING_LOGIN=4]="PENDING_LOGIN";e[e.FINISH=5]="FINISH"}(Ye||(Ye={}));!function(e){e[e.QR_CODE=0]="QR_CODE";e[e.CONFIRM=1]="CONFIRM"}(qe||(qe={}));var $e=n(182765),Je=new he.Z("LoginQRSocket");function et(e){var t=Qe(s.useState(0),2),n=t[0],r=t[1],o=Qe(s.useState(!1),2),a=o[0],i=o[1],l=Qe(s.useState({step:Ye.INITIALIZING
}),2),c=l[0],u=l[1],f=Qe(s.useState(null),2),d=f[0],h=f[1],p=function(){var e=fe((0,s.useState)(de()),2),t=e[0],n=e[1];(0,s.useEffect)((function(){var e=function(){n(de())};window.addEventListener("visibilitychange",e);return function(){window.removeEventListener("visibilitychange",e)}}),[n]);return t}(),E=s.useMemo((function(){return new ie.Z(1500,3e4)}),[]),_=s.useRef();_.current=s.useCallback((function(){u({step:Ye.INITIALIZING});if(p)r((function(e){return e+1}));else{Je.info("document is not visible, will defer reconnection when document becomes visible.");i(!0)}}),[p]);var m=s.useCallback((function(){!function(e){var t=e.current;if(void 0===t)throw new Error("tried to unwrap an undefined value.");return t}(_)()}),[_]),g=s.useCallback((function(){Je.error("Could not complete QR code login, trying to restart with a new QR code.");u({step:Ye.INITIALIZING});E.pending||E.fail(m)}),[m,E]);s.useEffect((function(){if(p&&a&&c.step===Ye.INITIALIZING){
Je.info("reconnecting, now that document is visible");i(!1);r((function(e){return e+1}))}}),[c,p,a,i]);s.useEffect((function(){var t=function(){if(null!=i)return i;throw new Error("No key pair set")},n=Date.now(),r="wss:".concat(window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT,"/?v=2"),s=new WebSocket(r);Je.info("[0ms] connecting to ".concat(r));var o,a=function(e){return Je.info("[".concat("".concat(Date.now()-n,"ms"),"] ").concat(e))},i=null,l=null,c=null,f=null,d=!0,p=function(){if(d){d=!1;s.send(JSON.stringify({op:"heartbeat"}))}else{a("heartbeat timeout, reconnecting.");s.close();g()}};s.onmessage=(o=Ve((function(n){var r,o,i,l,h,_,N,S,O,I,A,T,b;return Xe(this,(function(C){switch(C.label){case 0:r=n.data;switch((o=JSON.parse(r)).op){case"nonce_proof":return[3,1];case"pending_remote_init":return[3,3];case"pending_login":return[3,5];case"pending_ticket":return[3,6];case"pending_finish":return[3,8];case"finish":return[3,10];case"cancel":return[3,12];case"hello":return[3,13]
;case"heartbeat_ack":return[3,14]}return[3,15];case 1:i=o.encrypted_nonce;return[4,Pe(t(),i)];case 2:l=C.sent();a("computed nonce proof");s.send(JSON.stringify({op:"nonce_proof",nonce:l}));return[2];case 3:E.succeed();re.S.dispatch(y.CkL.WAVE_EMPHASIZE);return[4,Ce(t())];case 4:if((h=C.sent())!==o.fingerprint)throw new Error("bad fingerprint ".concat(h," !== ").concat(o.fingerprint));a("handshake complete awaiting remote auth.");u({step:Ye.PENDING_REMOTE_INIT,fingerprint:h});return[2];case 5:null==(_=o.ticket)&&g();u({step:Ye.PENDING_LOGIN,ticket:_});return[2];case 6:re.S.dispatch(y.CkL.WAVE_EMPHASIZE);a("remote auth handshake started, awaiting ticket/cancel.");N=o.encrypted_user_payload;return[4,we(t(),N)];case 7:S=C.sent();u({step:Ye.PENDING_TICKET,user:S});return[2];case 8:re.S.dispatch(y.CkL.WAVE_EMPHASIZE);a("remote auth handshake started, awaiting finish/cancel.");O=o.encrypted_user_payload;return[4,we(t(),O)];case 9:I=C.sent();u({step:Ye.PENDING_FINISH,user:I});return[2]
;case 10:re.S.dispatch(y.CkL.WAVE_EMPHASIZE);a("remote auth handshake finished.");A=o.encrypted_token;u({step:Ye.FINISH});return[4,De(t(),A)];case 11:T=C.sent();e(T);return[2];case 12:a("remote auth handshake cancelled.");m();return[2];case 13:a("got hello, auth timeout=".concat(o.timeout_ms,"ms"));b=o.heartbeat_interval;f=setTimeout((function(){f=null;p();c=setInterval(p,b)}),Math.floor(b*Math.random()));return[2];case 14:d=!0;C.label=15;case 15:return[2]}}))})),function(e){return o.apply(this,arguments)});s.onopen=Ve((function(){var e;return Xe(this,(function(t){switch(t.label){case 0:return[4,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["decrypt"])];case 1:return[4,Te(i=t.sent())];case 2:l=t.sent();return[4,Ce(i)];case 3:e=t.sent();a("connected, handshaking with fingerprint: ".concat(e));s.send(JSON.stringify({op:"init",encoded_public_key:l}));h(i);return[2]}}))}));s.onclose=function(e){
a("disconnected, code: ".concat(e.code," ").concat(e.reason));g()};s.onerror=function(e){a("disconnected, error: ".concat(JSON.stringify(e)));g()};return function(){a("cleaning up");s.onopen=function(){return null};s.onmessage=function(){return null};s.onclose=function(){return null};s.onerror=function(){return null};s.close(1e3);E.cancel();null!=f&&clearTimeout(f);null!=c&&clearInterval(c)}}),[m,e,n,E,g]);return{state:c,rsaKeyPair:d,cancel:m,handleFailure:g}}function tt(e){var t=e.text,n=void 0===t?"":t,o=$e,a=Qe(s.useState(!1),2),i=a[0],l=a[1];s.useEffect((function(){var e=new Image;e.src=o;e.onload=function(){return l(!0)};e.onerror=function(){return l(!0)}}),[o]);s.useEffect((function(){i&&f.AccessibilityAnnouncer.announce(z.Z.Messages.LOGIN_WITH_QR_LOADING_FINISHED_LABEL)}),[i]);return(0,r.jsx)("div",{className:Be().qrCodeContainer,children:""!==n&&i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(le.ZP,{className:Be().qrCode,size:160,text:n}),(0,r.jsx)("div",{
className:Be().qrCodeOverlay,children:(0,r.jsx)("img",{src:o,alt:""})})]}):(0,r.jsx)("div",{className:Be().qrCodeOverlay,"aria-label":z.Z.Messages.LOGIN_WITH_QR_LOADING_LABEL,"aria-busy":!0,children:(0,r.jsx)(f.Spinner,{className:Be().qrCode,type:f.Spinner.Type.WANDERING_CUBES,"aria-hidden":!0})})})}var nt=function(e){var t=e.className,n=e.children;return(0,r.jsx)(f.Text,{variant:"text-md/normal",color:"text-danger",className:t,children:n})};function rt(e){var t=e.state,n=e.cancel,s=e.errorMessage;switch(t.step){case Ye.INITIALIZING:case Ye.PENDING_REMOTE_INIT:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tt,{text:t.step===Ye.PENDING_REMOTE_INIT?"https://discord.com/ra/".concat(t.fingerprint):""}),(0,r.jsx)(H.Dx,{className:We().marginBottom8,children:z.Z.Messages.LOGIN_WITH_QR}),null!=s?(0,r.jsx)(nt,{children:s}):(0,r.jsx)(H.DK,{children:z.Z.Messages.LOGIN_WITH_QR_DESCRIPTION.format()})]});case Ye.PENDING_TICKET:case Ye.PENDING_FINISH:var o=t.user;return(0,r.jsxs)(r.Fragment,{
children:[(0,r.jsx)(ce.Z,{className:Be().qrAvatar,user:o,size:f.AvatarSizes.SIZE_120,isMobile:!0,status:Ge.Sk.ONLINE}),(0,r.jsx)(H.Dx,{className:We().marginBottom8,children:z.Z.Messages.CONFIRM_QR_CHECK_YOUR_PHONE}),(0,r.jsx)(H.DK,{children:z.Z.Messages.LOGIN_AS.format({username:"".concat(Ue.ZP.getUserTag(o))})}),(0,r.jsx)(f.Button,{look:f.Button.Looks.BLANK,color:f.Button.Colors.LINK,size:f.Button.Sizes.MIN,onClick:n,className:Be().startOverButton,children:z.Z.Messages.QR_CODE_LOGIN_START_OVER})]});case Ye.PENDING_LOGIN:case Ye.FINISH:return(0,r.jsx)(f.Spinner,{type:f.Spinner.Type.WANDERING_CUBES})}}function st(e){var t=e.authTokenCallback,n=et(t),o=n.state,a=n.rsaKeyPair,i=n.cancel,l=n.handleFailure,c=function(e){switch(e){case Ye.INITIALIZING:case Ye.PENDING_REMOTE_INIT:return qe.QR_CODE;case Ye.PENDING_TICKET:case Ye.PENDING_FINISH:case Ye.PENDING_LOGIN:case Ye.FINISH:return qe.CONFIRM}}(o.step);s.useEffect((function(){o.step===Ye.PENDING_LOGIN&&null!=o.ticket&&I.ZP.post({
url:y.ANM.REMOTE_AUTH_LOGIN,body:{ticket:o.ticket},oldFormErrors:!0}).then((e=Ve((function(e){var n;return Xe(this,(function(r){switch(r.label){case 0:if(null==a)return[3,5];r.label=1;case 1:r.trys.push([1,3,,4]);return[4,De(a,e.body.encrypted_token)];case 2:n=r.sent();t(n);return[3,4];case 3:r.sent();l();return[3,4];case 4:return[3,6];case 5:l();r.label=6;case 6:return[2]}}))})),function(t){return e.apply(this,arguments)})).catch((function(){l()}));var e}),[o,t,a,l]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:Be().verticalSeparator}),(0,r.jsx)(f.Sequencer,{fillParent:!0,className:Be().qrLogin,step:c,steps:[qe.QR_CODE,qe.CONFIRM],children:(0,r.jsx)("div",{className:Be().qrLoginInner,children:(0,r.jsx)(rt,{state:o,cancel:i})})})]})}var ot=n(247246),at=n(335150),it=n(971994),lt=n.n(it);function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ut(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t,n,r,s,o,a){try{var i=e[o](a),l=i.value}catch(e){n(e);return}i.done?t(l):Promise.resolve(l).then(r,s)}function dt(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){ft(o,r,s,a,i,"next",e)}function i(e){ft(o,r,s,a,i,"throw",e)}a(void 0)}))}}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function pt(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Et(e){Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Et(e)}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){pt(e,t,n[t])}))}return e}function mt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function gt(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?ut(e):t}function Nt(e,t){Nt=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Nt(e,t)}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){i=!0;s=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ot=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Et(e);if(t){var s=Et(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return gt(this,n)}}var At=function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;(r=0,s)&&(o=[2&o[0],s.value]);switch(o[0]){case 0:case 1:s=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue
;default:if(!(s=a.trys,s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1];s=o;break}if(s&&a.label<s[2]){a.label=s[2];a.ops.push(o);break}s[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};function Tt(){return(0,r.jsx)(H.ZP,{children:(0,r.jsx)(f.Spinner,{})})}function bt(e){var t=e.authBoxClassName,a=e.loginStatus,i=e.handleReset,l=St(s.useState(!1),2),c=l[0],u=l[1];return(0,r.jsxs)(H.ZP,{className:t,children:[(0,r.jsx)("img",{alt:"",src:n(148267),className:We().marginBottom20}),(0,r.jsx)(H.Dx,{className:We().marginBottom8,children:z.Z.Messages.TWO_FA}),(0,r.jsx)(H.DK,{children:z.Z.Messages.TWO_FA_WEBAUTHN_BODY}),(0,r.jsxs)(H.gO,{className:We().marginTop40,children:[(0,r.jsx)(H.zx,{submitting:c||a===y.u34.LOGGING_IN_MFA_WEBAUTHN,onClick:function(){u(!0)
;var e=b.default.getWebAuthnChallenge();null!=e?o.U2(JSON.parse(e)).then((function(e){u(!1);h.Z.loginMFA({code:JSON.stringify(e),ticket:b.default.getMFATicket(),isWebAuthn:!0});re.S.dispatch(y.CkL.WAVE_EMPHASIZE)})).catch((function(e){u(!1);d.Z.dispatch({type:"LOGIN_MFA_FAILURE",message:e.message})})):d.Z.dispatch({type:"LOGIN_MFA_WEBAUTHN_TO_TOTP"})},children:z.Z.Messages.TWO_FA_WEBAUTHN_ACTION}),(0,r.jsx)(H.zx,{look:H.zx.Looks.OUTLINED,className:We().marginTop8,disabled:a===y.u34.LOGGING_IN_MFA_WEBAUTHN,onClick:function(){d.Z.dispatch({type:"LOGIN_MFA_WEBAUTHN_TO_TOTP"})},children:z.Z.Messages.TWO_FA_WEBAUTHN_SWITCH_TOTP}),(0,r.jsx)(H.zx,{look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,className:We().marginTop8,onClick:i,children:z.Z.Messages.TWO_FA_LOGIN_FOOTER})]})]})}var Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,
configurable:!0}});t&&Nt(e,t)}(s,e);var t=It(s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var n,o,a=ut(n=t.call(this,e));n.handleAuthToken=(o=dt((function(e){return At(this,(function(t){switch(t.label){case 0:return[4,h.Z.loginToken(e,!1)];case 1:t.sent();C.default.track(y.rMx.LOGIN_SUCCESSFUL,{source:y.uRl.QR_CODE,login_source:a.loginSource,gift_code_sku_id:a.giftCodeSKUId,is_new_user:!1});return[2]}}))})),function(e){return o.apply(this,arguments)});n.setLoginRef=function(e){n.loginRef=e};n.setPasswordRef=function(e){n.passwordRef=e};n.setCodeRef=function(e){n.codeRef=e};n.getFullLogin=function(){var e=n.state;return e.loginPrefix+e.login};n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};n.handleLogin=function(e){var t=n.state,r=t.password,s=t.undelete;null!=e&&e.preventDefault();h.Z.login({login:n.getFullLogin(),password:r,undelete:s,
source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId,invite:n.props.invite});re.S.dispatch(y.CkL.WAVE_EMPHASIZE)};var i=ut(n);n.handleIPAuthorize=function(){var e=dt((function(e){var t,n,r,s,o,a;return At(this,(function(l){switch(l.label){case 0:t=i.state,n=t.password,r=t.undelete;s=i.getFullLogin();l.label=1;case 1:l.trys.push([1,4,,5]);return[4,Y.Z.verifyPhone(s,e,!1)];case 2:o=l.sent().token;return[4,h.Z.authorizeIPAddress(o)];case 3:l.sent();h.Z.login({login:s,password:n,undelete:r,source:i.loginSource,giftCodeSKUId:i.giftCodeSKUId});re.S.dispatch(y.CkL.WAVE_EMPHASIZE);return[3,5];case 4:null!=(a=l.sent()).body&&null!=a.body.message&&i.setState({phoneVerifyError:a.body.message});return[3,5];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();var u=ut(n);n.handlePasswordReset=function(){var e=dt((function(e){var t,n,r;return At(this,(function(s){switch(s.label){case 0:t=u.props.transitionTo;u.setState({phoneVerifyError:null});s.label=1;case 1:
s.trys.push([1,3,,4]);return[4,Y.Z.verifyPhone(u.getFullLogin(),e,!1)];case 2:n=s.sent().token;t(y.Z5c.RESET,{search:(0,l.stringify)({token:n,from_login:"true"})});return[3,4];case 3:null!=(r=s.sent()).body&&null!=r.body.message&&u.setState({phoneVerifyError:r.body.message});return[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();n.handleTokenSubmit=function(e){var t=n.state.code,r=n.props.mfaTicket;null!=e&&e.preventDefault();h.Z.loginMFA({code:t.replace(/ /g,""),ticket:r,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId});re.S.dispatch(y.CkL.WAVE_EMPHASIZE)};n.handleTokenSubmitMFAv2=function(e){var t=e.mfaType,r=e.data,s=e.ticket;re.S.dispatch(y.CkL.WAVE_EMPHASIZE);return h.Z.loginMFAv2({code:r,ticket:s,mfaType:t,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId})};n.handleSMSTokenSubmit=function(e){var t=n.state.smsCode,r=n.props.mfaTicket;null!=e&&e.preventDefault();h.Z.loginSMS({code:t.replace(/ /g,""),ticket:r})
;re.S.dispatch(y.CkL.WAVE_EMPHASIZE)};n.handleToggleSMSLogin=function(e){var t=n.props.mfaTicket;null!=e&&e.preventDefault();h.Z.requestSMSToken(t);re.S.dispatch(y.CkL.WAVE_EMPHASIZE)};var d=ut(n);n.handleForgotPassword=function(){var e=dt((function(e){var t;return At(this,(function(n){switch(n.label){case 0:null!=e&&e.preventDefault();null!=d.loginRef&&d.loginRef.focus();t=d.getFullLogin();n.label=1;case 1:n.trys.push([1,3,,4]);re.S.dispatch(y.CkL.WAVE_EMPHASIZE);return[4,h.Z.forgotPassword(t)];case 2:n.sent();(0,f.openModal)((function(e){return(0,r.jsx)(f.ConfirmModal,mt(_t({header:z.Z.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:z.Z.Messages.OKAY,confirmButtonColor:H.zx.Colors.BRAND,className:c.tq?lt().mobile:""},e),{children:(0,r.jsx)(f.Text,{variant:"text-md/normal",children:z.Z.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:t})})}))}));return[3,4];case 3:n.sent();return[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()
;n.handleResendCode=function(){Y.Z.resendCode(n.getFullLogin())};n.handleReset=function(e){null!=e&&e.preventDefault();h.Z.loginReset();n.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",undelete:!1,checkingHandoff:!1,redirecting:!1})};n.handleCancelAccountDeletion=function(){n.setState({undelete:!0},n.handleLogin)};n.handleGotoRegister=function(){var e,t=n.state.login,r=n.props,s=r.invite,o=r.giftCode,a=r.guildTemplate,i=r.location,c=r.transitionTo,u=r.redirectTo,f=null!=i?(0,l.parse)(i.search):{};""!==t&&(f.email=t);if(null!=s){f.mode="register";e=y.Z5c.INVITE(s.code)}else if(null!=o){f.mode="register";e=y.Z5c.GIFT_CODE(o.code)}else if(null!=a)e=y.Z5c.GUILD_TEMPLATE(a.code);else if(null!=u){e=y.Z5c.REGISTER;f.redirect_to=u}else e=y.Z5c.REGISTER;h.Z.loginReset();c(e,{search:(0,l.stringify)(f)});re.S.dispatch(y.CkL.WAVE_EMPHASIZE)};var p,E,_=null!=e.location?(0,l.parse)(e.location.search):{};n.state={redirecting:e.authenticated,checkingHandoff:e.handoffAvailable,
loginPrefix:"",login:null!==(E=null!==(p=_.email)&&void 0!==p?p:_.login)&&void 0!==E?E:"",password:"",code:"",smsCode:"",undelete:!1,phoneVerifyError:null,dismissedChooseAccount:!1};return n}var o=s.prototype;o.componentDidMount=function(){var e=this.props,t=e.handoffAvailable,n=e.authenticated,r=e.giftCodeSKU,s=e.invite,o=e.location;t&&!n?(0,p.is)():n&&this.loginOrSSO(n,o,!0);C.default.track(y.rMx.LOGIN_VIEWED,_t({location:null!=s?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource,authenticated:n},null!=r?(0,m.Z)(r,!1,!1):{}),{flush:!0});h.Z.getLocationMetadata();(0,$.e)("login")};o.componentDidUpdate=function(e){var t=this.props,n=t.authenticated,r=t.location,s=this.state.checkingHandoff;!n||e.authenticated||s||this.loginOrSSO(n,r);if(e.errors!==this.props.errors)if(this.hasError("password")){var o;null===(o=this.passwordRef)||void 0===o||o.focus()}else if(this.hasError("email")||this.hasError("login")){var a;null===(a=this.loginRef)||void 0===a||a.focus()
}else if(this.hasError("code")){var i;null===(i=this.codeRef)||void 0===i||i.focus()}};o.loginOrSSO=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;if(e&&null!=t){this.setState({redirecting:!0});n?h.Z.verifySSOToken().then((function(){return r.transitionSSO(t)})):this.transitionSSO(t)}};o.transitionSSO=function(e){var t=this.props,n=t.transitionTo,r=t.redirectTo,s=t.replaceWith,o=null!=e?(0,l.parse)(e.search):{};delete o.redirect_to;if(null!=r)null!=s?s(r):n(r);else if(null==o.service)n(y.Z5c.APP);else{var a=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+y.ANM.SSO,i=mt(_t({},o),{token:b.default.getToken()});window.location="".concat(a,"?").concat((0,l.stringify)(i))}};o.hasError=function(e){return null!=this.props.errors[e]};o.renderHandOffAvailable=function(){var e=this.props.authBoxClassName;return(0,r.jsxs)(H.ZP,{className:e,children:[(0,r.jsx)(H.Hh,{}),(0,r.jsx)(H.Dx,{className:We().marginBottom8,
children:z.Z.Messages.BROWSER_HANDOFF_DETECTING_TITLE}),(0,r.jsx)(H.DK,{children:z.Z.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION})]})};o.renderHandOffContinue=function(){var e=this.props,t=e.user,n=e.transitionTo,s=e.authBoxClassName;return null==t?null:(0,r.jsxs)(H.ZP,{className:s,children:[(0,r.jsx)(H.qE,{src:t.getAvatarURL(void 0,100),size:f.AvatarSizes.DEPRECATED_SIZE_100,className:We().marginBottom20}),(0,r.jsx)(H.Dx,{className:We().marginBottom8,children:z.Z.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:t.toString()})}),(0,r.jsx)(H.DK,{className:We().marginBottom40,children:z.Z.Messages._BROWSER_HANDOFF_SUCCESS_BODY}),(0,r.jsxs)(H.gO,{children:[(0,r.jsx)(H.zx,{onClick:function(){return n(y.Z5c.APP)},className:We().marginBottom8,children:z.Z.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:t.toString()})}),(0,r.jsx)(H.zx,{look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,onClick:this.handleReset,children:z.Z.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL})]})]})}
;o.renderDisabledAccount=function(){var e=this.props.authBoxClassName,t=this.props.loginStatus===y.u34.ACCOUNT_DISABLED,n=t?z.Z.Messages.ACCOUNT_DISABLED_TITLE:z.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,s=t?z.Z.Messages.ACCOUNT_DISABLED_DESCRIPTION:z.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return(0,r.jsx)(H.ZP,{tag:"form",onSubmit:this.handleReset,className:e,children:(0,r.jsxs)(f.HeadingLevel,{component:(0,r.jsx)(H.Dx,{className:We().marginBottom8,children:n}),children:[(0,r.jsx)(H.DK,{className:We().marginBottom20,children:s}),(0,r.jsxs)(H.gO,{children:[(0,r.jsx)(H.zx,{color:H.zx.Colors.BRAND,type:"submit",children:z.Z.Messages._RETURN_TO_LOGIN}),(0,r.jsx)("div",{className:i()(We().marginTop8,lt().needAccount),children:z.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion})})]})]})})};o.renderResolving=function(){var e=this,t=this.props,n=t.authBoxClassName,s=t.country;return(0,r.jsxs)(H.ZP,{className:n,children:[(0,
r.jsx)(ae.R,{}),(0,r.jsxs)(H.gO,{className:We().marginTop20,children:[(0,r.jsx)(X.Z,{className:We().marginBottom20,alpha2:s.alpha2,countryCode:s.code.split(" ")[0],label:z.Z.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,onChange:function(t,n){return e.setState({login:t,loginPrefix:n})},setRef:this.setLoginRef,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:this.state.login,autoFocus:!0,required:!0}),(0,r.jsx)(H.II,{className:We().marginBottom20,label:z.Z.Messages.FORM_LABEL_PASSWORD,onChange:function(t){return e.setState({password:t})},type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",value:this.state.password,required:!0}),(0,r.jsx)(H.zx,{className:We().marginBottom8,type:"submit",disabled:!0,children:z.Z.Messages._LOGIN}),(0,r.jsx)(H.zx,{disabled:!0,look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,children:z.Z.Messages.FORGOT_PASSWORD}),(0,r.jsx)(H.zx,{disabled:!0,className:We().marginTop4,look:H.zx.Looks.LINK,
color:H.zx.Colors.LINK,children:z.Z.Messages.NEED_ACCOUNT})]})]})};o.renderDefaultForm=function(e){var t,n,s=this,o=this.props,a=o.invite,l=o.giftCode,c=o.loginStatus,u=o.country,d=o.showMobileWebHandoff,h=o.disableAutofocusOnDefaultForm,p=!this.hasError("email")&&this.hasError("password"),E=null!=(null==a?void 0:a.stage_instance);t=null==a||E?null!=l?(0,r.jsx)(oe.Z,{giftCode:l}):(0,r.jsxs)("div",{className:lt().header,children:[(0,r.jsx)(H.Dx,{className:We().marginBottom8,children:z.Z.Messages.LOGIN_TITLE},"title"),!1===(0,se.eL)()?(0,r.jsx)(H.DK,{children:z.Z.Messages.AUTH_LOGIN_BODY},"subtitle"):null]}):(0,r.jsx)(ae.Z,{invite:a});return(0,r.jsxs)(te.Z,{direction:te.Z.Direction.HORIZONTAL,align:te.Z.Align.CENTER,children:[(0,r.jsxs)("div",{className:lt().mainLoginContainer,children:[this.canShowChooseAccount&&this.state.dismissedChooseAccount&&(0,r.jsx)(H.zx,{onClick:function(){s.setState((function(e){return mt(_t({},e),{dismissedChooseAccount:!1})}))},look:H.zx.Looks.LINK,
color:H.zx.Colors.PRIMARY,className:lt().goBackButton,children:(0,r.jsxs)("div",{className:lt().content,children:[(0,r.jsx)(ne.Z,{width:16,height:16,className:lt().caret}),(0,r.jsx)(f.Text,{variant:"text-md/normal",children:z.Z.Messages.AGE_GATE_GO_BACK})]})}),t,(0,r.jsx)(f.HeadingLevel,{children:(0,r.jsxs)(H.gO,{className:We().marginTop20,children:[(0,r.jsx)(X.Z,{alpha2:u.alpha2,countryCode:u.code.split(" ")[0],className:We().marginBottom20,label:z.Z.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,error:null!==(n=this.renderError("login"))&&void 0!==n?n:this.renderError("email"),onChange:function(e,t){return s.setState({login:e,loginPrefix:t})},setRef:this.setLoginRef,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:this.state.login,autoFocus:!p&&!d&&!h,required:!0}),(0,r.jsx)(H.II,{label:z.Z.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:function(e){return s.setState({password:e})},name:"password",type:"password",
setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",autoFocus:p&&!d&&!h,value:this.state.password,required:!0}),(0,r.jsx)(H.zx,{onClick:this.handleForgotPassword,look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,className:i()(We().marginBottom20,We().marginTop4),children:z.Z.Messages.FORGOT_PASSWORD}),(0,r.jsx)(H.zx,{type:"submit",submitting:c===y.u34.LOGGING_IN,color:E?H.zx.Colors.GREEN:H.zx.Colors.BRAND,className:We().marginBottom8,children:E?z.Z.Messages._LOGIN_STAGE:z.Z.Messages._LOGIN}),(0,r.jsxs)("div",{className:We().marginTop4,children:[(0,r.jsx)("span",{className:lt().needAccount,children:z.Z.Messages.NEED_ACCOUNT}),(0,r.jsx)(H.zx,{onClick:this.handleGotoRegister,look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,className:lt().smallRegisterLink,children:z.Z.Messages.REGISTER})]})]})})]}),(0,r.jsx)(f.HeadingLevel,{children:e?(0,r.jsx)(st,{authTokenCallback:this.handleAuthToken}):null})]},"form-wrapper")};o.renderDefault=function(){
var e=this.props,t=e.authBoxClassName,n=e.showMobileWebHandoff;return(0,r.jsxs)("div",{className:lt().pageContainer,children:[(0,r.jsx)(H.ZP,{onSubmit:this.handleLogin,tag:"form",className:t,expanded:!0,children:this.renderDefaultForm(!0)}),n&&(0,r.jsx)(U,{})]})};o.renderGuildTemplate=function(e){var t=this;return(0,r.jsx)(ot.Z,{onSubmit:this.handleLogin,tag:"form",className:i()(this.props.authBoxClassName,lt().horizontalAuthBox),children:function(){return[(0,r.jsx)(g.Z,{guildTemplate:e},"template"),t.renderDefaultForm(!1)]}})};o.renderMFA=function(){var e=this;if(this.props.hasLoginExperiment)return this.renderMFAv2();var t=this.props,s=t.loginStatus,o=t.mfaSMS,a=t.authBoxClassName;return(0,r.jsxs)(H.ZP,{onSubmit:this.handleTokenSubmit,tag:"form",className:a,children:[(0,r.jsx)("img",{alt:"",src:n(148267),className:We().marginBottom20}),(0,r.jsx)(H.Dx,{className:We().marginBottom8,children:z.Z.Messages.TWO_FA}),(0,r.jsx)(H.DK,{children:z.Z.Messages.TWO_FA_ENTER_TOKEN_BODY}),(0,
r.jsxs)(H.gO,{className:We().marginTop40,children:[(0,r.jsx)(H.II,{className:We().marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({code:t})},autoComplete:"one-time-code",placeholder:z.Z.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:z.Z.Messages.TWO_FA_ENTER_TOKEN_LABEL,value:this.state.code,required:!0},"totpCode"),(0,r.jsx)(H.zx,{type:"submit",submitting:s===y.u34.LOGGING_IN_MFA,children:z.Z.Messages._LOGIN}),o?(0,r.jsx)(H.zx,{onClick:this.handleToggleSMSLogin,submitting:s===y.u34.LOGGING_IN_MFA_SMS,className:We().marginTop8,look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,children:z.Z.Messages.MFA_SMS_RECEIVE_CODE}):null,(0,r.jsx)(H.zx,{look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,className:We().marginTop4,onClick:this.handleReset,children:z.Z.Messages._TWO_FA_LOGIN_FOOTER})]})]})};o.renderMFASMS=function(){var e=this;if(this.props.hasLoginExperiment)return this.renderMFAv2()
;var t=this.props,s=t.loginStatus,o=t.maskedPhone,a=t.authBoxClassName,i=s===y.u34.LOGGING_IN_MFA_SMS||""===o;return(0,r.jsxs)(H.ZP,{onSubmit:this.handleSMSTokenSubmit,tag:"form",className:a,children:[(0,r.jsx)("img",{alt:"",src:n(148267),className:We().marginBottom20}),(0,r.jsx)(H.Dx,{className:We().marginBottom8,children:z.Z.Messages.TWO_FA}),(0,r.jsx)(H.DK,{className:We().marginBottom8,children:i?z.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_SENDING:z.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_SENT.format({phoneNumber:o})}),(0,r.jsxs)(H.gO,{className:We().marginTop40,children:[(0,r.jsx)(H.II,{className:We().marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({smsCode:t})},autoComplete:"off",placeholder:z.Z.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:z.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_LABEL,value:this.state.smsCode,required:!0},"smsCode"),(0,r.jsx)(H.zx,{type:"submit",submitting:i,
color:i?H.zx.Colors.TRANSPARENT:H.zx.Colors.BRAND,children:z.Z.Messages._LOGIN}),i?null:(0,r.jsx)(H.zx,{onClick:this.handleToggleSMSLogin,className:We().marginTop8,look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,children:z.Z.Messages.MFA_SMS_RESEND}),(0,r.jsx)(H.zx,{look:H.zx.Looks.LINK,color:H.zx.Colors.LINK,className:We().marginTop4,onClick:this.handleReset,children:z.Z.Messages._TWO_FA_LOGIN_FOOTER})]})]})};o.renderMFAWebAuthn=function(){if(this.props.hasLoginExperiment)return this.renderMFAv2();var e=this.props,t=e.authBoxClassName,n=e.loginStatus;return(0,r.jsx)(bt,{authBoxClassName:t,loginStatus:n,handleReset:this.handleReset})};o.renderMFAv2=function(){var e={ticket:this.props.mfaTicket,methods:this.props.mfaMethods};return(0,r.jsx)(H.ZP,{style:{padding:0},children:(0,r.jsx)(S.Cd,{mfaFinish:this.handleTokenSubmitMFAv2,request:e,onEarlyClose:function(){d.Z.dispatch({type:"LOGIN_RESET"})},width:480})})};o.renderIPAuthorization=function(){
var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return(0,r.jsx)(H.ZP,{tag:"form",className:e,children:(0,r.jsx)(_.Z,{title:z.Z.Messages.PHONE_IP_AUTHORIZATION_TITLE,subtitle:z.Z.Messages.PHONE_IP_AUTHORIZATION_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handleIPAuthorize,onCancel:h.Z.loginReset})})};o.renderPasswordRecovery=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return(0,r.jsx)(H.ZP,{tag:"form",className:e,children:(0,r.jsx)(_.Z,{title:z.Z.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_TITLE,subtitle:z.Z.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handlePasswordReset,onCancel:h.Z.loginReset})})};o.renderChooseAccount=function(){var e=this;return(0,r.jsx)(Q,{onDismiss:function(){e.setState((function(e){return mt(_t({},e),{dismissedChooseAccount:!0})}))}})};o.render=function(){
var e=this.props,t=e.authenticated,n=e.invite,s=e.guildTemplate,o=e.loginStatus,a=e.handoffAvailable,i=this.state,l=i.checkingHandoff;if(i.redirecting||l)return(0,r.jsx)(Tt,{});if(a)return this.renderHandOffAvailable();if(t&&l)return this.renderHandOffContinue();switch(o){case y.u34.LOGGING_IN_MFA_SMS:case y.u34.MFA_SMS_STEP:return this.renderMFASMS();case y.u34.LOGGING_IN_MFA:case y.u34.MFA_STEP:return this.renderMFA();case y.u34.MFA_WEBAUTHN_STEP:case y.u34.LOGGING_IN_MFA_WEBAUTHN:return this.renderMFAWebAuthn();case y.u34.ACCOUNT_SCHEDULED_FOR_DELETION:case y.u34.ACCOUNT_DISABLED:return this.renderDisabledAccount();case y.u34.PHONE_IP_AUTHORIZATION:return this.renderIPAuthorization();case y.u34.PASSWORD_RECOVERY_PHONE_VERIFICATION:return this.renderPasswordRecovery();case y.u34.LOGGING_IN:case y.u34.NONE:default:
return null!=n&&n.state===y.r2o.RESOLVING?this.renderResolving():null!=s?s.state===at.Rj.RESOLVING?this.renderResolving():this.renderGuildTemplate(s):this.canShowChooseAccount&&!this.state.dismissedChooseAccount?this.renderChooseAccount():this.renderDefault()}};s.getDerivedStateFromProps=function(e){var t=e.handoffAvailable,n=e.authenticated;return t||n?null:{checkingHandoff:!1}};!function(e,t,n){t&&ht(e.prototype,t);n&&ht(e,n)}(s,[{key:"loginSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite,s=e.loginSource,o=e.redirectTo;if(null!=s)return s;if(null!=t)return"gift";if(null!=n)return"guild_template";if(null!=r){if(null!=r.guild)return"guild_invite";if(null!=r.channel)return"dm_invite";if(null!=r.inviter)return"friend_invite"}return null!=o?(0,E.L)(o):null}},{key:"giftCodeSKUId",get:function(){var e=this.props.giftCode;return null!=e?e.skuId:null}},{key:"canShowChooseAccount",get:function(){return this.props.hasLoggedInAccounts}}]);return s
}(s.PureComponent);Ct.defaultProps={transitionTo:function(e){return n.g.location.assign(e)}};const vt=function(e){var t=(0,u.cj)([J.Z,ee.Z,b.default,G.Z,q.Z],(function(){return{authenticated:b.default.isAuthenticated(),handoffAvailable:J.Z.isHandoffAvailable(),user:J.Z.user,loginStatus:b.default.getLoginStatus(),mfaTicket:b.default.getMFATicket(),mfaSMS:b.default.getMFASMS(),mfaMethods:b.default.getMFAMethods(),maskedPhone:b.default.getMaskedPhone(),errors:b.default.getErrors(),defaultRoute:ee.Z.defaultRoute,country:q.Z.getCountryCode(),hasLoggedInAccounts:G.Z.getHasLoggedInAccounts()}})),n=N.Z.useExperiment({location:"webConnectedLogin"}).enabled;return(0,r.jsx)(Ct,mt(_t({},e,t),{hasLoginExperiment:n}))}},247246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(785893),s=(n(667294),n(294184)),o=n.n(s),a=n(558820),i=n(361796),l=n.n(i);function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function u(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function f(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(s[n]=e[n])}return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}}return s}function d(e){var t=e.children,n=e.className,s=f(e,["children","className"]),i=t();return(0,r.jsx)(a.ZP,u(function(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}({},s),{className:o()(n,l().container),contentClassName:l().content,children:i.map((function(e,t){return(0,r.jsx)("div",{className:l().column,style:{flexBasis:"".concat(100/i.length,"%")},children:e},t)}))}))}},144936:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var r=n(785893),s=n(667294),o=n(294184),a=n.n(o),i=n(517563),l=n(289283),c=n(202351),u=n(744564),f=n(84441),d=n(645106),h=n(845882),p=n(171053),E=n(154209),_=n(686874),m=n(664625),g=n(558820),N=n(930948),S=n(2590),O=n(473708),I=n(380203),A=n.n(I);function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n,r,s,o,a){try{var i=e[o](a),l=i.value}catch(e){n(e);return}
i.done?t(l):Promise.resolve(l).then(r,s)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){b(o,r,s,a,i,"next",e)}function i(e){b(o,r,s,a,i,"throw",e)}a(void 0)}))}}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return y(e)}function L(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function M(e,t){
return!t||"object"!==x(t)&&"function"!=typeof t?T(e):t}function R(e,t){R=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return R(e,t)}var x=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var s=y(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return M(this,n)}}var j=function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;(r=0,s)&&(o=[2&o[0],s.value]);switch(o[0]){case 0:case 1:s=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(s=a.trys,s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1];s=o;break}if(s&&a.label<s[2]){a.label=s[2];a.ops.push(o);break}s[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};c.ZP.initialize();var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,writable:!0,configurable:!0}});t&&R(e,t)}(s,e);var t=D(s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var n,r,o,a=T(n=t.call(this,e));n.handleSubmit=(o=C((function(e){var t,n,r,s,o,i,l,c,h,p,E,_,m,g,I,A,T;return j(this,(function(b){switch(b.label){case 0:t=a.props,n=t.location,r=t.onLoginSuccess,s=t.source,o=t.resetToken;i=a.state,l=i.password,c=i.error;null!=e&&e.preventDefault();if(0===l.length){a.setState({error:O.Z.Messages.PASSWORD_REQUIRED});N.S.dispatch(S.CkL.WAVE_EMPHASIZE);return[2]}null!=c&&a.setState({error:null});h=o;null!=n&&(h=(0,d.Z)(n));if(null==h)return[2];a.setState({working:!0});b.label=1;case 1:b.trys.push([1,3,,4]);return[4,f.Z.resetPassword(h,l,s)];case 2:p=b.sent(),E=p.result,_=p.sms,m=p.webauthn,g=p.ticket,I=p.token,A=p.totp,T=p.backup;if(E===f.c.MFA)u.Z.dispatch({type:"LOGIN_MFA_STEP",ticket:g,sms:_,webauthn:m,totp:A,backup:T});else if(null!=r)r(I);else{u.Z.dispatch({
type:"LOGIN_SUCCESS",token:I});a.handlePasswordChangeSuccess()}return[3,4];case 3:b.sent();return[3,4];case 4:a.setState({working:!1});return[2]}}))})),function(e){return o.apply(this,arguments)});var c=T(n);n.handleTokenSubmit=function(){var e=C((function(e){var t,n,r,s,o,a,i,l,h,p,E,_;return j(this,(function(m){switch(m.label){case 0:t=c.props,n=t.location,r=t.mfaTicket,s=t.onLoginSuccess,o=t.resetToken,a=t.source;i=c.state,l=i.code,h=i.password,p=i.error;null!=e&&e.preventDefault();if(0===h.length){c.setState({error:O.Z.Messages.PASSWORD_REQUIRED});N.S.dispatch(S.CkL.WAVE_EMPHASIZE);return[2]}null!=p&&c.setState({error:null});E=o;null!=n&&(E=(0,d.Z)(n));if(null==E)return[2];c.setState({working:!0});m.label=1;case 1:m.trys.push([1,3,,4]);return[4,f.Z.resetPasswordMFA(l,r,h,E,a)];case 2:_=m.sent();if(null!=s)s(_);else{u.Z.dispatch({type:"LOGIN_SUCCESS",token:_});c.handlePasswordChangeSuccess()}return[3,4];case 3:m.sent();return[3,4];case 4:c.setState({working:!1});return[2]}}))}))
;return function(t){return e.apply(this,arguments)}}();n.handleTokenSubmitMFAv2=function(e,t){var r=n.props,s=r.location,o=r.mfaTicket,a=r.onLoginSuccess,i=r.resetToken,l=r.source,c=n.state.password;if(0===c.length){u.Z.dispatch({type:"LOGIN_RESET"});return Promise.reject()}var h=i;null!=s&&(h=(0,d.Z)(s));if(null==h){u.Z.dispatch({type:"LOGIN_RESET"});return Promise.reject()}return f.Z.resetPasswordMFAv2({method:e,code:t,ticket:o,password:c,token:h,source:l}).then((function(e){if(null!=a)a(e);else{u.Z.dispatch({type:"LOGIN_SUCCESS",token:e});n.handlePasswordChangeSuccess()}}))};n.handlePasswordChangeSuccess=function(){var e=n.props.replaceWith;l.Em||l.tq?n.setState({success:!0}):e(S.Z5c.APP)};n.handleGoToLogin=function(){var e=n.props.transitionTo;f.Z.loginReset();e(S.Z5c.LOGIN)};n.isSubmitting=function(){var e=n.props.loginStatus;return n.state.working||e===S.u34.LOGGING_IN_MFA};n.handleOpenApp=function(){(0,h.Z)("password_reset")};n.hasError=function(e){
return null!=n.props.errors[e]||null!=n.state.error};n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};var p=null!=(null===(r=n.props.location)||void 0===r?void 0:r.search)&&""!==n.props.location.search?(0,i.parse)(n.props.location.search):null;n.state={method:"",password:"",code:"",error:null,hasCancel:null!=p&&null!=p.from_login,working:!1,success:!1};return n}var o=s.prototype;o.componentDidMount=function(){(0,_.e)("reset_password")};o.renderPasswordReset=function(){var e=this,t=this.state,s=t.password,o=t.error,a=t.hasCancel,i=this.isSubmitting(),l=null!=o?o:this.renderError("password");return(0,r.jsxs)(g.ZP,{onSubmit:this.handleSubmit,tag:"form",children:[(0,r.jsx)("img",{alt:"",src:n(null==l?359074:396679),className:A().marginBottom20}),(0,r.jsx)(g.Dx,{children:O.Z.Messages.RESET_PASSWORD_TITLE}),(0,r.jsxs)(g.gO,{className:A().marginTop20,children:[(0,r.jsx)(g.II,{label:O.Z.Messages.FORM_LABEL_NEW_PASSWORD,
className:A().marginBottom20,name:"password",value:s,onChange:function(t){return e.setState({password:t})},error:l,type:"password"}),(0,r.jsx)(g.zx,{type:"submit",submitting:i,children:O.Z.Messages.CHANGE_PASSWORD}),a?(0,r.jsx)(g.zx,{className:A().marginTop8,onClick:this.handleGoToLogin,submitting:i,color:g.zx.Colors.PRIMARY,children:O.Z.Messages.CANCEL}):null]})]})};o.renderMFA=function(){var e=this;if(this.props.hasLoginExperiment)return this.renderMFAv2();var t=this.state.error,s=null!=t?t:this.renderError("code");return(0,r.jsxs)(g.ZP,{onSubmit:this.handleTokenSubmit,tag:"form",children:[(0,r.jsx)("img",{alt:"",src:n(null==s?359074:396679),className:a()(A().marginBottom20,l.tq?A().marginTop20:"")}),(0,r.jsx)(g.Dx,{className:A().marginBottom8,children:O.Z.Messages.TWO_FA_ENTER_TOKEN_LABEL}),(0,r.jsx)(g.DK,{children:O.Z.Messages.TWO_FA_ENTER_TOKEN_BODY}),(0,r.jsxs)(g.gO,{className:A().marginTop20,children:[(0,r.jsx)(g.II,{className:A().marginBottom8,error:s,onChange:function(t){
return e.setState({code:t})},autoComplete:"off",placeholder:O.Z.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,value:this.state.code}),(0,r.jsx)(g.zx,{type:"submit",submitting:this.isSubmitting(),children:O.Z.Messages._LOGIN})]})]})};o.renderMFAv2=function(){var e=this,t={ticket:this.props.mfaTicket,methods:this.props.mfaMethods};return(0,r.jsx)(g.ZP,{style:{padding:0},children:(0,r.jsx)(E.Cd,{mfaFinish:function(t){var n=t.mfaType,r=t.data;return e.handleTokenSubmitMFAv2(n,r)},request:t,onEarlyClose:function(){u.Z.dispatch({type:"LOGIN_RESET"})},width:480})})};o.renderSucceeded=function(){return(0,r.jsxs)(g.ZP,{children:[(0,r.jsx)("img",{alt:"",src:n(359074),className:a()(A().marginBottom20,l.tq?A().marginTop20:"")}),(0,r.jsx)(g.Dx,{className:A().marginBottom40,children:O.Z.Messages.RESET_PASSWORD_SUCCESS_TITLE}),(0,r.jsx)(g.zx,{onClick:this.handleOpenApp,children:O.Z.Messages.VERIFICATION_OPEN_DISCORD})]})};o.render=function(){
return this.state.success?this.renderSucceeded():null!=this.props.mfaTicket&&""!==this.props.mfaTicket?this.renderMFA():this.renderPasswordReset()};return s}(s.PureComponent);P.defaultProps={transitionTo:function(e){return n.g.location.assign(e)},replaceWith:function(e){return n.g.location.replace(e)}};const Z=function(e){var t=(0,c.cj)([m.default],(function(){return{loginStatus:m.default.getLoginStatus(),mfaTicket:m.default.getMFATicket(),errors:m.default.getErrors(),mfaMethods:m.default.getMFAMethods()}})),n=p.Z.useExperiment({location:"webConnectedReset"}).enabled;return(0,r.jsx)(P,L(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){v(e,t,n[t])}))}return e}({},e,t),{hasLoginExperiment:n}))}},110108:(e,t,n)=>{"use strict";n.d(t,{
F:()=>r,L:()=>i});var r,s=n(327930),o=n(2590),a=n(897196);!function(e){e.ROLE_SUBSCRIPTION="role_subscription";e.ROLE_SUBSCRIPTION_SETTING="role_subscription_setting"}(r||(r={}));function i(e){var t=decodeURIComponent(e),n=(0,s.Qj)(t);return null!=n&&n.channelId===a.oC.ROLE_SUBSCRIPTIONS?r.ROLE_SUBSCRIPTION:t===o.Z5c.SETTINGS(o.oAB.SUBSCRIPTIONS,"role-subscriptions")?r.ROLE_SUBSCRIPTION_SETTING:void 0}},645106:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(517563);function s(e){var t=null!=e.hash&&""!==e.hash?(0,r.parse)(e.hash):null;if(null!=(null==t?void 0:t.token))return t.token;var n=null!=e.search&&""!==e.search?(0,r.parse)(e.search):null;return null!=(null==n?void 0:n.token)?n.token:null}},153081:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(785893),s=(n(667294),n(304548)),o=n(836485),a=n(107364),i=n(558820),l=n(473708),c=n(400353),u=n.n(c),f=n(380203),d=n.n(f);function h(e){var t=e.title,n=e.subtitle,c=e.error,f=e.onSubmit,h=e.onCancel;return(0,r.jsxs)(a.Z,{
direction:a.Z.Direction.VERTICAL,children:[(0,r.jsx)(i.Dx,{className:d().marginBottom8,children:t}),(0,r.jsx)(i.DK,{className:u().subTitle,children:n}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{inputClassName:u().codeInput,onSubmit:f}),null!=c?(0,r.jsx)(s.Text,{className:u().error,variant:"text-sm/normal",children:c}):null]}),null!=h&&(0,r.jsx)(s.Button,{className:u().button,onClick:h,color:s.Button.Colors.PRIMARY,children:l.Z.Messages.CANCEL})]})}},267342:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(335150),s=n(473708);function o(e){switch(e){case r.HQ.CLASSROOM:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_CLASSROOM,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CLASSROOM,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CLASSROOM,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CLASSROOM,author:s.Z.Messages.DISCORD_NAME};case r.HQ.LOCAL_COMMUNITIES:return{
header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_LOCAL_COMMUNITIES,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_LOCAL_COMMUNITIES,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_LOCAL_COMMUNITIES,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_LOCAL_COMMUNITIES,author:s.Z.Messages.DISCORD_NAME};case r.HQ.CREATORS_HOBBIES:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_CREATORS_HOBBIES,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CREATORS_HOBBIES,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CREATORS_HOBBIES,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CREATORS_HOBBIES,author:s.Z.Messages.DISCORD_NAME};case r.HQ.GLOBAL_COMMUNITIES:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_GLOBAL_COMMUNITIES,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_GLOBAL_COMMUNITIES,
nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_GLOBAL_COMMUNITIES,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_GLOBAL_COMMUNITIES,author:s.Z.Messages.DISCORD_NAME};case r.HQ.FRIENDS_FAMILY:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_FRIENDS_FAMILY,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_FRIENDS_FAMILY,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_FRIENDS_FAMILY,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_FRIENDS_FAMILY,author:s.Z.Messages.DISCORD_NAME};case r.HQ.STUDY_GROUPS:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_STUDY_GROUPS,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_STUDY_GROUPS,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_STUDY_GROUPS,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_STUDY_GROUPS,
author:s.Z.Messages.DISCORD_NAME};case r.HQ.CREATE_FROM_SCRATCH:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_CREATE_FROM_SCRATCH,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CREATE_FROM_SCRATCH,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CREATE_FROM_SCRATCH,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CREATE_FROM_SCRATCH,author:s.Z.Messages.DISCORD_NAME};case r.HQ.CAMPUS_CLUBS:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_CAMPUS_CLUBS,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CAMPUS_CLUBS,nameLabel:s.Z.Messages.FORM_LABEL_SERVER_NAME,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CAMPUS_CLUBS,author:s.Z.Messages.DISCORD_NAME};case r.HQ.LEAGUE_CLUBS:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_LEAGUE_CLUBS,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_LEAGUE_CLUBS,
nameLabel:s.Z.Messages.FORM_LABEL_SERVER_NAME,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.CREATE_SERVER_DEFAULT_SERVER_NAME_FORMAT,author:s.Z.Messages.DISCORD_NAME};case r.HQ.GITHUB_HACKATHON:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_GITHUB_HACKATHON,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_GITHUB_HACKATHON,nameLabel:s.Z.Messages.FORM_LABEL_SERVER_NAME,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.CREATE_SERVER_DEFAULT_SERVER_NAME_FORMAT,author:"GitHub Education"};default:return{header:s.Z.Messages.GUILD_TEMPLATE_CREATE_DISCORD,nameLabel:s.Z.Messages.FORM_LABEL_SERVER_NAME,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.CREATE_SERVER_DEFAULT_SERVER_NAME_FORMAT}}}},281437:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r,s=n(785893),o=(n(667294),n(558820)),a=n(267342),i=n(256273),l=n(335150),c=n(26312),u=n.n(c);function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,
configurable:!0,writable:!0}):e[t]=n;return e}var d=(f(r={},l.HQ.CLASSROOM,n(149374)),f(r,l.HQ.LOCAL_COMMUNITIES,n(106952)),f(r,l.HQ.CREATORS_HOBBIES,n(123555)),f(r,l.HQ.GLOBAL_COMMUNITIES,n(100553)),f(r,l.HQ.FRIENDS_FAMILY,n(614040)),f(r,l.HQ.STUDY_GROUPS,n(952587)),f(r,l.HQ.CREATE_FROM_SCRATCH,n(841860)),f(r,l.HQ.CAMPUS_CLUBS,n(661807)),f(r,l.HQ.LEAGUE_CLUBS,n(568534)),f(r,l.HQ.GITHUB_HACKATHON,n(525106)),r);function h(e){var t=e.headerId,n=e.guildTemplate,r=n.code,c=d[r];if(null!=c){var f,h=(0,a.Z)(r),p=h.header,E=h.description,_=h.author;return(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{className:u().image,src:c,alt:""}),(0,s.jsx)(o.Dx,{className:u().header,id:t,children:p}),(0,s.jsx)(o.DK,{children:E}),n.state===l.Rj.RESOLVED?(0,s.jsx)(i.D,{className:u().usagePill,count:null!==(f=n.usageCount)&&void 0!==f?f:0,verifiedName:_}):null]})}return(0,s.jsx)(i.Z,{pillClassName:u().usagePill,guildTemplate:n,tall:!0})}},256273:(e,t,n)=>{"use strict";n.d(t,{D:()=>N,Z:()=>S})
;var r=n(785893),s=(n(667294),n(294184)),o=n.n(s),a=n(304548),i=n(859917),l=n(558820),c=n(985651),u=n(267342);var f=n(335150),d=n(473708),h=n(167083),p=n.n(h),E=n(380203),_=n.n(E);function m(){return(0,r.jsx)(i.Z,{className:p().verifiedIcon,children:(0,r.jsx)("div",{className:p().verifiedCheckContainer,children:(0,r.jsx)(c.Z,{className:p().verifiedCheck})})})}function g(e){var t=e.verified,n=e.text;return t?(0,r.jsxs)("div",{className:p().verifiedNameContainer,children:[(0,r.jsx)(m,{}),n]}):(0,r.jsx)(r.Fragment,{children:n})}function N(e){var t=e.className,n=e.count,s=e.creator,a=e.verifiedName;return(0,r.jsx)("div",{className:o()(p().usagePill,t,p().userText),children:null!=s||null!=a?d.Z.Messages.GUILD_TEMPLATE_USAGES_BY_CREATOR2.format({usageCount:n,creator:null!=a?a:s,creatorHook:function(e,t){return(0,r.jsx)(g,{text:e,verified:null!=a},t)}}):d.Z.Messages.GUILD_TEMPLATE_USAGES.format({usageCount:n})})}function S(e){var t=e.guildTemplate,n=e.error,s=e.tall,i=e.pillClassName
;if(null!=n&&""!==n)return(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsx)(l.Dx,{children:d.Z.Messages.INVITE_MODAL_ERROR_TITLE}),(0,r.jsx)(l.DK,{children:n})]});if(t.state===f.Rj.RESOLVING)return(0,r.jsx)("div",{className:p().container,children:(0,r.jsx)(a.Spinner,{})});var c,h=(0,u.Z)(t.code).header;if(s){var E;return(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsx)(l.Dx,{className:p().title,children:h}),(0,r.jsx)(l.DK,{className:o()(p().subtitle,_().marginTop2),children:d.Z.Messages.GUILD_TEMPLATE_BASED_ON}),(0,r.jsx)(l.Dx,{className:o()(p().title,p().userText),children:t.name}),null!=t.description&&""!==t.description&&(0,r.jsx)(l.DK,{className:o()(p().subtitle,p().userText,_().marginTop8),children:t.description}),(0,r.jsx)(N,{className:i,count:null!==(E=t.usageCount)&&void 0!==E?E:0,creator:t.creator.username,verifiedName:(c=t.code,(0,u.Z)(c).author)})]})}return(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsx)(l.Dx,{className:p().title,
children:h}),(0,r.jsx)(l.DK,{className:o()(p().subtitle,p().userText),children:t.name})]})}},171053:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(260561).B)({id:"2023-08_login_mfav2",label:"Login MFAv2",kind:"user",defaultConfig:{enabled:!1},treatments:[{id:0,label:"Control",config:{enabled:!1}},{id:1,label:"Enabled",config:{enabled:!0}}]})},349979:(e,t,n)=>{"use strict";n.d(t,{W:()=>r,Z:()=>y});var r,s=n(785893),o=n(667294),a=n(294184),i=n.n(a),l=n(202351),c=n(304548),u=n(84441),f=n(971402),d=n(722406),h=n(664625),p=n(793461),E=n(473903),_=n(154451),m=n(652591),g=n(749565),N=n(196644),S=n(873553),O=n(22724),I=n(2590),A=n(473708),T=n(966582),b=n.n(T);function C(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}!function(e){e[e.LOGIN_REQUIRED=0]="LOGIN_REQUIRED";e[e.SWITCHED=1]="SWITCHED";e[e.REMOVED=2]="REMOVED"}(r||(r={}));function v(e){var t=e.actionText,n=e.user,o=e.onAction,a=(0,
l.cj)([E.default,p.Z,h.default],(function(){return{currentUser:E.default.getCurrentUser(),hidePrivateData:p.Z.hidePersonalInformation,isAuthenticated:h.default.isAuthenticated()}})),O=a.currentUser,T=a.hidePrivateData,v=a.isAuthenticated,y=new d.Z(n),L=v&&(null==O?void 0:O.id)===y.id,M=n.tokenStatus===S.q.INVALID,R=T||y.isPomelo()?null:"#".concat(y.discriminator),x=null;L?x=(0,s.jsx)(c.Text,{variant:"text-sm/semibold",className:b().hintText,color:"text-positive",children:A.Z.Messages.SWITCH_ACCOUNTS_ACTIVE_ACCOUNT}):M&&(x=(0,s.jsx)(c.Text,{variant:"text-sm/semibold",className:b().hintText,color:"text-danger",children:A.Z.Messages.SWITCH_ACCOUNTS_INVALID_TOKEN}));return(0,s.jsx)("div",{className:b().accountCard,children:(0,s.jsxs)("div",{className:b().userDetails,children:[(0,s.jsx)(c.Avatar,{src:y.getAvatarURL(void 0,40),size:c.AvatarSizes.SIZE_40,"aria-label":n.username}),(0,s.jsxs)("div",{className:i()(b().usernameSection,C({},b().hasActionMaxWidth,!L)),children:[(0,s.jsxs)("div",{
className:b().username,children:[(0,s.jsx)(c.Text,{variant:"text-md/semibold",color:"header-primary",className:b().textOverflow,children:g.ZP.getUserTag(y,{mode:"username",identifiable:T?"never":"always"})}),(0,s.jsx)(c.Text,{color:"header-secondary",variant:"text-sm/normal",children:R})]}),x]}),(0,s.jsxs)("div",{className:b().userActions,children:[!L&&(0,s.jsx)(c.Button,{onClick:function(){if(M)o(r.LOGIN_REQUIRED,n.id);else{m.default.track(I.rMx.MULTI_ACCOUNT_SWITCH_ATTEMPT,{location:{section:I.jXE.MANAGE_ACCOUNTS_MODAL}});N.yD(n.id);o(r.SWITCHED,n.id)}},color:c.Button.Colors.PRIMARY,children:M?A.Z.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN:t}),(0,s.jsx)(c.Button,{className:b().userActionMenu,onClick:function(e){(0,f.vq)(e,(function(e){var t=e.onSelect;return(0,s.jsx)(c.Menu,{"aria-label":A.Z.Messages.SWITCH_ACCOUNTS_MANAGE_ACCOUNT,navId:"manage-multi-account",onClose:f.Zy,onSelect:t,children:(0,s.jsx)(c.MenuItem,{id:"remove-account",label:A.Z.Messages.SWITCH_ACCOUNTS_REMOVE_ACCOUNT,
action:function(){!function(){u.Z.logout(null,n.id).finally((function(){N.Zd(n.id)}));var e={};null!=O?e.section=I.jXE.MANAGE_ACCOUNTS_MODAL:e.page=I.Usc.LOGIN;m.default.track(I.rMx.MULTI_ACCOUNT_ACCOUNT_REMOVE,{location:e});o(r.REMOVED,n.id)}();null!=t&&t()},color:"danger"})})}))},size:c.Button.Sizes.ICON,look:c.Button.Looks.BLANK,color:c.Button.Colors.WHITE,"aria-label":A.Z.Messages.MORE_OPTIONS,children:(0,s.jsx)(_.Z,{className:b().overflowMenuIcon})})]})]})})}function y(e){var t=e.actionText,n=e.onAction,r=(0,O.L)(),a=r.isLoading,i=r.multiAccountUsers;return(0,s.jsx)("div",{className:b().list,children:a?(0,s.jsx)(c.Spinner,{}):i.map((function(e,r){return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(v,{user:e,actionText:t,onAction:n},e.id),i.length-1!==r&&(0,s.jsx)("div",{role:"separator",className:b().separator})]},e.id)}))})}},53540:(e,t,n)=>{"use strict";n.d(t,{Nz:()=>r,o9:()=>o});var r;!function(e){e.PHONE="phone";e.EMAIL="email"}(r||(r={}));var s=/^[-() \d]+$/;function o(e,t){
return e===r.PHONE?!(n=t,n.startsWith("+")):e!==r.EMAIL&&(!(t.length<3)&&s.test(t));var n}},78501:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var r=n(785893),s=n(667294),o=n(294184),a=n.n(o),i=n(304548),l=n(443812),c=n(53540),u=n(248088),f=n(202351),d=n(316878),h=n(426797),p=n(376845),E=n(919252),_=n.n(E);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){g(e,t,n[t])}))}return e}function S(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){
var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){i=!0;s=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){var t=e.show,n=e.alpha2,o=e.countryCode,l=(0,f.e7)([d.Z],(function(){return d.Z.useReducedMotion})),c=s.useRef(null),E=O(s.useState(0),2),m=E[0],I=E[1],A=O(s.useState(!1),2),T=A[0],b=A[1];s.useEffect((function(){var e=function(){var e,n;I(t&&null!==(n=null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==n?n:0)};e();window.addEventListener("resize",e);return function(){return window.removeEventListener("resize",e)}}),[t,n,o]);var C=(0,u.useSpring)({width:"".concat(m,"px"),immediate:l,onStart:function(){b(!0)},onRest:function(){b(!1)}});return(0,r.jsx)(i.Popout,{position:"top",renderPopout:function(e){return(0,r.jsx)(p.Z,{className:_().popout,onClick:function(t){!function(e){
h.Z.setCountryCode(e)}(t);e.closePopout()}})},children:function(e){return(0,r.jsx)("div",{className:a()(_().outerContainer,g({},_().hidden,!(t||T))),children:(0,r.jsx)(u.animated.div,{className:_().container,style:C,children:(0,r.jsxs)("div",{className:_().innerContainer,ref:c,children:[(0,r.jsxs)(i.Clickable,S(N({},e),{className:_().countryCode,children:[n," ",o]})),(0,r.jsx)("div",{className:_().separator})]})})})}})}var A=n(340839),T=n.n(A),b=n(229481),C=n.n(b);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){i=!0
;s=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){var t,n=e.alpha2,o=e.countryCode,u=e.forceMode,f=e.label,d=e.error,h=e.className,p=e.required,E=e.value,_=e.setRef,m=e.placeholder,g=e.autoFocus,N=e.maxLength,S=e.spellCheck,O=e.autoComplete,A=e.autoCapitalize,b=e.autoCorrect,v=e.onChange,M=e.inputClassName,R=(0,l.Dt)(),x=L(s.useState(!1),2),D=x[0],j=x[1],P=(0,c.o9)(u,E);return(0,r.jsx)(i.FormItem,{title:f,error:d,className:h,required:p,tag:"label",htmlFor:R,
children:(0,r.jsxs)("div",{className:a()(C().input,T().input,M,(t={},y(t,C().error,null!=d),y(t,C().focused,D),t)),children:[(0,r.jsx)(I,{show:P,alpha2:n,countryCode:o}),(0,r.jsx)(i.TextInput,{id:R,name:"email",type:u===c.Nz.EMAIL?"email":"text",value:E,inputRef:_,placeholder:m,"aria-label":f,required:p,onChange:function(e){var t=(0,c.o9)(u,e)?o:"";v(e,t)},autoComplete:O,autoCapitalize:A,autoCorrect:b,autoFocus:g,maxLength:N,spellCheck:S,className:T().inputWrapper,inputClassName:T().inputField,onFocus:function(){return j(!0)},onBlur:function(){return j(!1)}})]})})}}}]);
//# sourceMappingURL=84c8fc1783e65c436cde.js.map